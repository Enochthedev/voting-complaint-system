# Enable/Disable Escalation Rules - Visual Guide

## Overview
This guide demonstrates the visual elements and user interactions for enabling and disabling escalation rules.

## UI Components

### 1. Status Badge
Each rule displays its current status with a colored badge:

**Active Rule:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Harassment - Critical  [Active]                 â”‚
â”‚                        â†‘ Green badge            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Inactive Rule:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Course Content - Medium  [Inactive]             â”‚
â”‚                          â†‘ Gray badge           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Toggle Button
Located in the actions section of each rule card:

**Active Rule (Eye Icon):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    [ğŸ‘ï¸] [âœï¸] [ğŸ—‘ï¸] â”‚
â”‚                                     â†‘             â”‚
â”‚                              Click to deactivate â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Inactive Rule (EyeOff Icon):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    [ğŸ‘ï¸â€ğŸ—¨ï¸] [âœï¸] [ğŸ—‘ï¸] â”‚
â”‚                                     â†‘             â”‚
â”‚                               Click to activate  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Status Filter
Located in the filter panel at the top of the page:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Search Rules    Category    Priority    Status  â”‚
â”‚ [Search...]     [All]       [All]       [All â–¼] â”‚
â”‚                                          â”œâ”€â”€â”€â”€â”€â”¤ â”‚
â”‚                                          â”‚ All â”‚ â”‚
â”‚                                          â”‚Activeâ”‚ â”‚
â”‚                                          â”‚Inactiveâ”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Create/Edit Form Checkbox
Located at the bottom of the rule form:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Escalate To                                     â”‚
â”‚ [Select a user... â–¼]                            â”‚
â”‚                                                 â”‚
â”‚ â˜‘ Rule is active                                â”‚
â”‚ This rule will be applied to matching complaintsâ”‚
â”‚                                                 â”‚
â”‚                              [Cancel] [Create]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Interactions

### Toggle Rule Status

**Step 1: View Rule**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Harassment - Critical  [Active]                         â”‚
â”‚                                                         â”‚
â”‚ â±ï¸ Time Threshold: 2 hours                              â”‚
â”‚ â¬†ï¸ Escalate To: Dr. Sarah Johnson                       â”‚
â”‚                                                         â”‚
â”‚ Created: 11/1/2024 â€¢ Last updated: 11/1/2024           â”‚
â”‚                                          [ğŸ‘ï¸] [âœï¸] [ğŸ—‘ï¸]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Step 2: Click Toggle Button**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Harassment - Critical  [Inactive]  â† Status changed     â”‚
â”‚                                                         â”‚
â”‚ â±ï¸ Time Threshold: 2 hours                              â”‚
â”‚ â¬†ï¸ Escalate To: Dr. Sarah Johnson                       â”‚
â”‚                                                         â”‚
â”‚ Created: 11/1/2024 â€¢ Last updated: 11/26/2024 â† Updatedâ”‚
â”‚                                          [ğŸ‘ï¸â€ğŸ—¨ï¸] [âœï¸] [ğŸ—‘ï¸] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Step 3: Success Message**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Rule deactivated successfully                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Filter by Status

**Show Only Active Rules:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: [Active â–¼]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Results: 4 active rules displayed
```

**Show Only Inactive Rules:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status: [Inactive â–¼]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Results: 1 inactive rule displayed
```

### Create Rule with Status

**New Rule Form:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create New Escalation Rule                      â”‚
â”‚                                                 â”‚
â”‚ Category: [Academic â–¼]                          â”‚
â”‚ Priority: [High â–¼]                              â”‚
â”‚ Time Threshold: [48] hours                      â”‚
â”‚ Escalate To: [Dr. Sarah Johnson â–¼]             â”‚
â”‚                                                 â”‚
â”‚ â˜‘ Rule is active                                â”‚
â”‚ This rule will be applied to matching complaintsâ”‚
â”‚                                                 â”‚
â”‚                              [Cancel] [Create]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Inactive Rule:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜ Rule is active                                â”‚
â”‚ This rule will not be applied until activated   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color Scheme

### Light Mode
- **Active Badge**: Green background (#dcfce7), green text (#166534)
- **Inactive Badge**: Gray background (#f4f4f5), gray text (#27272a)
- **Toggle Button**: Outlined button with hover effect
- **Success Message**: Green background with checkmark icon

### Dark Mode
- **Active Badge**: Dark green background (#14532d), light green text (#86efac)
- **Inactive Badge**: Dark gray background (#27272a), light gray text (#e4e4e7)
- **Toggle Button**: Outlined button with dark mode colors
- **Success Message**: Dark green background with checkmark icon

## Accessibility

### Keyboard Navigation
- Tab to toggle button
- Enter/Space to activate toggle
- Tab to status filter dropdown
- Arrow keys to navigate filter options

### Screen Reader Support
- Button has `title` attribute: "Deactivate rule" / "Activate rule"
- Status badge has semantic meaning
- Success message is announced
- Form checkbox has associated label

### Visual Indicators
- Clear color contrast for badges
- Icon changes (Eye vs EyeOff)
- Text changes in help text
- Success message with icon

## Example Scenarios

### Scenario 1: Temporarily Disable Rule
**Use Case**: Admin wants to temporarily disable harassment escalation during a holiday period.

1. Navigate to Escalation Rules page
2. Find "Harassment - Critical" rule
3. Click Eye icon to deactivate
4. See "Rule deactivated successfully" message
5. Badge changes from green "Active" to gray "Inactive"
6. Icon changes from Eye to EyeOff

### Scenario 2: Activate Disabled Rule
**Use Case**: Admin wants to re-enable a previously disabled rule.

1. Filter by "Inactive" status
2. Find the disabled rule
3. Click EyeOff icon to activate
4. See "Rule activated successfully" message
5. Badge changes from gray "Inactive" to green "Active"
6. Icon changes from EyeOff to Eye

### Scenario 3: Create Inactive Rule for Testing
**Use Case**: Admin wants to create a rule but test it before activating.

1. Click "Create New Rule" button
2. Fill in rule details
3. Uncheck "Rule is active" checkbox
4. Click "Create Rule"
5. New rule appears with gray "Inactive" badge
6. Test the rule configuration
7. Click EyeOff icon to activate when ready

### Scenario 4: Bulk Status Management
**Use Case**: Admin wants to see all inactive rules to review them.

1. Set Status filter to "Inactive"
2. Review all inactive rules
3. Activate needed rules one by one
4. Or delete obsolete rules

## Implementation Notes

### State Management
- Status is stored in `is_active` boolean field
- Toggle updates state immediately
- Success message auto-dismisses after 3 seconds
- Filter state is independent of rule state

### Performance
- Filtering uses React.useMemo for efficiency
- Toggle updates only the affected rule
- No full page reload required
- Smooth transitions and animations

### Data Persistence
- Status changes update `updated_at` timestamp
- Changes are persisted to database (Phase 12)
- Filter preferences are session-based (not persisted)

## Testing Checklist

### Visual Testing
- [ ] Active badge displays correctly in light mode
- [ ] Active badge displays correctly in dark mode
- [ ] Inactive badge displays correctly in light mode
- [ ] Inactive badge displays correctly in dark mode
- [ ] Eye icon displays for active rules
- [ ] EyeOff icon displays for inactive rules
- [ ] Success message displays and auto-dismisses
- [ ] Status filter dropdown works correctly

### Functional Testing
- [ ] Toggle changes status from active to inactive
- [ ] Toggle changes status from inactive to active
- [ ] Badge updates immediately after toggle
- [ ] Icon updates immediately after toggle
- [ ] Success message shows correct text
- [ ] Filter shows only active rules when selected
- [ ] Filter shows only inactive rules when selected
- [ ] Form checkbox sets initial status correctly
- [ ] Form checkbox can be changed before submission

### Accessibility Testing
- [ ] Keyboard navigation works
- [ ] Screen reader announces status changes
- [ ] Color contrast meets WCAG standards
- [ ] Focus indicators are visible
- [ ] Tooltips are accessible

---

**Last Updated**: November 26, 2024
**Status**: Complete
**Related Files**:
- `src/app/admin/escalation-rules/page.tsx`
- `src/components/complaints/escalation-rule-form.tsx`
- `docs/TASK_10.1_ENABLE_DISABLE_RULES_COMPLETION.md`
